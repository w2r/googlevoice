# encoding=utf-8
"""
@Author  :   cherbim
@License :   清羽 (C) Copyright 2013-2019
@Contact :   qyu0615@gmail.com
@Software:   PyCharm
@Project ：  第01章
@File    :   voice.py
@Time    :   2021/9/11 10:50
@User    ：   cherbim
"""
import requests
import time
import threading
import queue

# 靓号合集
headers = {
    'authority': 'www.google.com',
    'sec-ch-ua': '"Chromium";v="92", " Not A;Brand";v="99", "Microsoft Edge";v="92"',
    'sec-ch-ua-mobile': '?0',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36 Edg/92.0.902.73',
    'accept': '*/*',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-mode': 'cors',
    'sec-fetch-dest': 'empty',
    'referer': 'https://www.google.com/voice/b/0?gsessionid=9MtSOq9h1-DejqvkWObRnRCyMIcj50WJ',
    'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6',
    'cookie': 'GV_NR=1; CONSENT=YES+US.zh-CN+; OGPC=19011583-4:; OGP=-19011583:; __Secure-1PSIDCC=AJi4QfEUnXQtoV1xGnTk_CSOqhet0FYhUt8FiHtHkPNXD0H2NkWXOj-JGKZn8xGkR3p06exRvpU; SID=BAiuhoTECLQfBVOWvYcSe8l-TxRxG6I0aMt6mh2jOALKywEJLAdU2KL2mvs7GvGIhp8UuA.; __Secure-1PSID=BAiuhoTECLQfBVOWvYcSe8l-TxRxG6I0aMt6mh2jOALKywEJ0q_lsIil4xdIJwBeUsk7UA.; __Secure-3PSID=BAiuhoTECLQfBVOWvYcSe8l-TxRxG6I0aMt6mh2jOALKywEJywDBuxPjiLVBRqODvkX5JQ.; HSID=ASIGeWIPB_I7nv0T_; SSID=ABWcXYppHeIOuDZZi; APISID=8OOJuhuPHY_IzZLD/AJGmXE-FIHc1hNw8k; SAPISID=CrhRvjWUsf_xLjeb/AVATqBREDYl7R7zkk; __Secure-1PAPISID=CrhRvjWUsf_xLjeb/AVATqBREDYl7R7zkk; __Secure-3PAPISID=CrhRvjWUsf_xLjeb/AVATqBREDYl7R7zkk; 1P_JAR=2021-08-21-00; NID=221=j_pNcmqQzA7SDgsCaQHOc_K7E8NMyJD7KswIMfUxeF1AFtpqFYNeT_MfCEAYU1gFDtI1Ybkq-R5s71C-013SLEwfo0mohgspwB0SHw1yFqiT0Q1LLkUSuUsNklIvO-eMGenHgMpzJwBQC4H4X1vc1vXHccfXLDTNh9OX-M11bkIwozNwcaHOhpdJPObpkAoReqxVFH3ay5Gz8lMR2v4kXxHQ4apnDblhxjUf2Z6GL0XutdzI0i39o34Yh4xLC0bj1tARqDBJ8T9I_jYh1YBmrL7OZpRZK3ukzLpXwaQv_dHgpYUf0KJw8XkHa3AtaUe-RC3qPmU2d7ehmuaMnxsOEM1Ypkg_4Ce3GwNv6R-BUzdzhUui_1bodhCDP4OYFHILx2sHtCQ0vb1-36k; DV=A4HbFtm0SH8VYPXf0FOdhZCXR89ithc; S=billing-ui-v3=-oEQ2DBe2UVL-AjydZziOCJqLzUjyfKP:billing-ui-v3-efe=-oEQ2DBe2UVL-AjydZziOCJqLzUjyfKP:grandcentral=9MtSOq9h1-DejqvkWObRnRCyMIcj50WJ; SIDCC=AJi4QfFp5cx2AfdC4fsU3v0oYNfrlOj5IwiTWX0Ng_mnMpO55kguE35n_zlE2tK7mPeQFNkkjzdF; __Secure-3PSIDCC=AJi4QfE7xIDdZ5qjY4CoURcMtfv0U7jYU2XYOe_KlJOjOqCz3khGjFU-EGNs0TpjXhODzOW0PuQ',
}
numbers = ['1234', '1111', '2222', '3333', '4444', '5555', '6666', '7777', '8888', '9999', '0000', '223344', '112233',
           '334455', '445566', '556677', '667788', '778899', '889900', '001122', '54321', '12345', '998877', '887766',
           '776655', '665544', '554433', '443322', '332211', '221100', '5201314', '1314520', '111122', '111133',
           '111144', '111155', '111166', '111177', '111188', '222211', '222233', '222244', '222255', '222266', '222277',
           '222288', '222299', '222200', '333311', '333322', '333333', '333344', '333355', '333366', '333377', '333388',
           '333399', '333300', '444411', '444422', '444433', '444455', '444466', '444477', '444488', '444499', '444400',
           '555511', '555522', '555533', '555544', '555566', '555577', '555588', '555599', '555500', '666611', '666622',
           '666633', '666644', '666655', '666677', '666688', '666699', '666600', '777711', '777722', '777733', '777744',
           '777755', '777766', '777788', '777799', '777700', '888811', '888822', '888833', '888844', '888855', '888866',
           '888877', '888899', '888800', '999911', '999922', '999933', '999944', '999955', '999966', '999977', '999988',
           '999900', '000011', '000022', '000033', '000044', '000055', '000066', '000077', '000088', '000099',
           '5211314', '1314521', '996688', '998866', '669988', '668899', '987654', '000111', '000222', '000333',
           '000444', '000555', '000666', '000777', '000888', '000999', '111000', '111222', '111333', '111444', '111555',
           '111666', '111777', '111888', '111999', '222000', '222111', '222333', '222444', '222555', '222666', '222777',
           '222888', '222999', '333000', '333111', '333222', '333444', '333555', '333666', '333777', '333888', '333999',
           '444000', '444111', '444222', '444333', '444555', '444666', '444777', '444888', '444999', '555000', '555111',
           '555222', '555333', '555444', '555666', '555777', '555888', '555999', '666000', '666111', '666222', '666333',
           '666444', '666555', '666777', '666888', '666999', '777000', '777111', '777222', '777333', '777444', '777555',
           '777666', '777888', '777999', '888000', '888111', '888222', '888333', '888444', '888555', '888666', '888777',
           '888999', '999000', '999111', '999222', '999333', '999444', '999555', '999666', '999777', '999888',
           '0011000', '0011222', '0011333', '0011444', '0011555', '0011666', '0011777', '0011888', '0011999', '0022000',
           '0022111', '0022333', '0022444', '0022555', '0022666', '0022777', '0022888', '0022999', '0033000', '0033111',
           '0033222', '0033444', '0033555', '0033666', '0033777', '0033888', '0033999', '0044000', '0044111', '0044222',
           '0044333', '0044555', '0044666', '0044777', '0044888', '0044999', '0055000', '0055111', '0055222', '0055333',
           '0055444', '0055666', '0055777', '0055888', '0055999', '0066000', '0066111', '0066222', '0066333', '0066444',
           '0066555', '0066777', '0066888', '0066999', '0077000', '0077111', '0077222', '0077333', '0077444', '0077555',
           '0077666', '0077888', '0077999', '0088000', '0088111', '0088222', '0088333', '0088444', '0088555', '0088666',
           '0088777', '0088999', '0099000', '0099111', '0099222', '0099333', '0099444', '0099555', '0099666', '0099777',
           '0099888', '1100111', '1100222', '1100333', '1100444', '1100555', '1100666', '1100777', '1100888', '1100999',
           '1122000', '1122111', '1122333', '1122444', '1122555', '1122666', '1122777', '1122888', '1122999', '1133000',
           '1133111', '1133222', '1133444', '1133555', '1133666', '1133777', '1133888', '1133999', '1144000', '1144111',
           '1144222', '1144333', '1144555', '1144666', '1144777', '1144888', '1144999', '1155000', '1155111', '1155222',
           '1155333', '1155444', '1155666', '1155777', '1155888', '1155999', '1166000', '1166111', '1166222', '1166333',
           '1166444', '1166555', '1166777', '1166888', '1166999', '1177000', '1177111', '1177222', '1177333', '1177444',
           '1177555', '1177666', '1177888', '1177999', '1188000', '1188111', '1188222', '1188333', '1188444', '1188555',
           '1188666', '1188777', '1188999', '1199000', '1199111', '1199222', '1199333', '1199444', '1199555', '1199666',
           '1199777', '1199888', '2200111', '2200222', '2200333', '2200444', '2200555', '2200666', '2200777', '2200888',
           '2200999', '2211000', '2211222', '2211333', '2211444', '2211555', '2211666', '2211777', '2211888', '2211999',
           '2233000', '2233111', '2233222', '2233444', '2233555', '2233666', '2233777', '2233888', '2233999', '2244000',
           '2244111', '2244222', '2244333', '2244555', '2244666', '2244777', '2244888', '2244999', '2255000', '2255111',
           '2255222', '2255333', '2255444', '2255666', '2255777', '2255888', '2255999', '2266000', '2266111', '2266222',
           '2266333', '2266444', '2266555', '2266777', '2266888', '2266999', '2277000', '2277111', '2277222', '2277333',
           '2277444', '2277555', '2277666', '2277888', '2277999', '2288000', '2288111', '2288222', '2288333', '2288444',
           '2288555', '2288666', '2288777', '2288999', '2299000', '2299111', '2299222', '2299333', '2299444', '2299555',
           '2299666', '2299777', '2299888', '3300111', '3300222', '3300333', '3300444', '3300555', '3300666', '3300777',
           '3300888', '3300999', '3311000', '3311222', '3311333', '3311444', '3311555', '3311666', '3311777', '3311888',
           '3311999', '3322000', '3322111', '3322333', '3322444', '3322555', '3322666', '3322777', '3322888', '3322999',
           '3344000', '3344111', '3344222', '3344333', '3344555', '3344666', '3344777', '3344888', '3344999', '3355000',
           '3355111', '3355222', '3355333', '3355444', '3355666', '3355777', '3355888', '3355999', '3366000', '3366111',
           '3366222', '3366333', '3366444', '3366555', '3366777', '3366888', '3366999', '3377000', '3377111', '3377222',
           '3377333', '3377444', '3377555', '3377666', '3377888', '3377999', '3388000', '3388111', '3388222', '3388333',
           '3388444', '3388555', '3388666', '3388777', '3388999', '3399000', '3399111', '3399222', '3399333', '3399444',
           '3399555', '3399666', '3399777', '3399888', '4400111', '4400222', '4400333', '4400444', '4400555', '4400666',
           '4400777', '4400888', '4400999', '4411000', '4411222', '4411333', '4411444', '4411555', '4411666', '4411777',
           '4411888', '4411999', '4422000', '4422111', '4422333', '4422444', '4422555', '4422666', '4422777', '4422888',
           '4422999', '4433000', '4433111', '4433222', '4433444', '4433555', '4433666', '4433777', '4433888', '4433999',
           '4455000', '4455111', '4455222', '4455333', '4455444', '4455666', '4455777', '4455888', '4455999', '4466000',
           '4466111', '4466222', '4466333', '4466444', '4466555', '4466777', '4466888', '4466999', '4477000', '4477111',
           '4477222', '4477333', '4477444', '4477555', '4477666', '4477888', '4477999', '4488000', '4488111', '4488222',
           '4488333', '4488444', '4488555', '4488666', '4488777', '4488999', '4499000', '4499111', '4499222', '4499333',
           '4499444', '4499555', '4499666', '4499777', '4499888', '5500111', '5500222', '5500333', '5500444', '5500555',
           '5500666', '5500777', '5500888', '5500999', '5511000', '5511222', '5511333', '5511444', '5511555', '5511666',
           '5511777', '5511888', '5511999', '5522000', '5522111', '5522333', '5522444', '5522555', '5522666', '5522777',
           '5522888', '5522999', '5533000', '5533111', '5533222', '5533444', '5533555', '5533666', '5533777', '5533888',
           '5533999', '5544000', '5544111', '5544222', '5544333', '5544555', '5544666', '5544777', '5544888', '5544999',
           '5566000', '5566111', '5566222', '5566333', '5566444', '5566555', '5566777', '5566888', '5566999', '5577000',
           '5577111', '5577222', '5577333', '5577444', '5577555', '5577666', '5577888', '5577999', '5588000', '5588111',
           '5588222', '5588333', '5588444', '5588555', '5588666', '5588777', '5588999', '5599000', '5599111', '5599222',
           '5599333', '5599444', '5599555', '5599666', '5599777', '5599888', '6600111', '6600222', '6600333', '6600444',
           '6600555', '6600666', '6600777', '6600888', '6600999', '6611000', '6611222', '6611333', '6611444', '6611555',
           '6611666', '6611777', '6611888', '6611999', '6622000', '6622111', '6622333', '6622444', '6622555', '6622666',
           '6622777', '6622888', '6622999', '6633000', '6633111', '6633222', '6633444', '6633555', '6633666', '6633777',
           '6633888', '6633999', '6644000', '6644111', '6644222', '6644333', '6644555', '6644666', '6644777', '6644888',
           '6644999', '6655000', '6655111', '6655222', '6655333', '6655444', '6655666', '6655777', '6655888', '6655999',
           '6677000', '6677111', '6677222', '6677333', '6677444', '6677555', '6677666', '6677888', '6677999', '6688000',
           '6688111', '6688222', '6688333', '6688444', '6688555', '6688666', '6688777', '6688999', '6699000', '6699111',
           '6699222', '6699333', '6699444', '6699555', '6699666', '6699777', '6699888', '7700111', '7700222', '7700333',
           '7700444', '7700555', '7700666', '7700777', '7700888', '7700999', '7711000', '7711222', '7711333', '7711444',
           '7711555', '7711666', '7711777', '7711888', '7711999', '7722000', '7722111', '7722333', '7722444', '7722555',
           '7722666', '7722777', '7722888', '7722999', '7733000', '7733111', '7733222', '7733444', '7733555', '7733666',
           '7733777', '7733888', '7733999', '7744000', '7744111', '7744222', '7744333', '7744555', '7744666', '7744777',
           '7744888', '7744999', '7755000', '7755111', '7755222', '7755333', '7755444', '7755666', '7755777', '7755888',
           '7755999', '7766000', '7766111', '7766222', '7766333', '7766444', '7766555', '7766777', '7766888', '7766999',
           '7788000', '7788111', '7788222', '7788333', '7788444', '7788555', '7788666', '7788777', '7788999', '7799000',
           '7799111', '7799222', '7799333', '7799444', '7799555', '7799666', '7799777', '7799888', '8800111', '8800222',
           '8800333', '8800444', '8800555', '8800666', '8800777', '8800888', '8800999', '8811000', '8811222', '8811333',
           '8811444', '8811555', '8811666', '8811777', '8811888', '8811999', '8822000', '8822111', '8822333', '8822444',
           '8822555', '8822666', '8822777', '8822888', '8822999', '8833000', '8833111', '8833222', '8833444', '8833555',
           '8833666', '8833777', '8833888', '8833999', '8844000', '8844111', '8844222', '8844333', '8844555', '8844666',
           '8844777', '8844888', '8844999', '8855000', '8855111', '8855222', '8855333', '8855444', '8855666', '8855777',
           '8855888', '8855999', '8866000', '8866111', '8866222', '8866333', '8866444', '8866555', '8866777', '8866888',
           '8866999', '8877000', '8877111', '8877222', '8877333', '8877444', '8877555', '8877666', '8877888', '8877999',
           '8899000', '8899111', '8899222', '8899333', '8899444', '8899555', '8899666', '8899777', '8899888', '9900111',
           '9900222', '9900333', '9900444', '9900555', '9900666', '9900777', '9900888', '9900999', '9911000', '9911222',
           '9911333', '9911444', '9911555', '9911666', '9911777', '9911888', '9911999', '9922000', '9922111', '9922333',
           '9922444', '9922555', '9922666', '9922777', '9922888', '9922999', '9933000', '9933111', '9933222', '9933444',
           '9933555', '9933666', '9933777', '9933888', '9933999', '9944000', '9944111', '9944222', '9944333', '9944555',
           '9944666', '9944777', '9944888', '9944999', '9955000', '9955111', '9955222', '9955333', '9955444', '9955666',
           '9955777', '9955888', '9955999', '9966000', '9966111', '9966222', '9966333', '9966444', '9966555', '9966777',
           '9966888', '9966999', '9977000', '9977111', '9977222', '9977333', '9977444', '9977555', '9977666', '9977888',
           '9977999', '9988000', '9988111', '9988222', '9988333', '9988444', '9988555', '9988666', '9988777', '9988999']
gv_number = []


def voice(gv):
    global a
    params = (
        ('c', ''),
        ('q', gv),
        ('start', '0'),
        ('country', 'US'),
    )
    try:
        response = requests.get('https://www.google.com/voice/b/0/setup/searchnew/', headers=headers, params=params,
                                timeout=5)
        # print(response.json())
        if response.json()['JSON']['num_matches'] == "0":
            pass
        else:
            for i in response.json()['JSON']['vanity_info']:
                if i[-len(gv):] == gv:
                    a.append(i)
                else:
                    pass
            if response.json()['JSON']['num_matches'] == "6":
                params = (
                    ('c', ''),
                    ('q', gv),
                    ('start', '5'),
                    ('country', 'US'),
                )
                response = requests.get('https://www.google.com/voice/b/0/setup/searchnew/', headers=headers,
                                        params=params, timeout=5)
                for i in response.json()['JSON']['vanity_info']:
                    if i[-len(gv):] == gv:
                        a.append(i)
    except IOError:
        print("查询出错")
        pass


def get_threading(q):
    while True:
        try:
            gv_name = str(q.get_nowait())  # 不阻塞的读取队列数据,获取图片网
            voice(gv_name)
        except Exception as e:
            break


while True:
    q = queue.Queue()
    for i in numbers:
        q.put(i)
    a = []
    # 多线程执行查询任务
    num = 12
    threads = []
    # 创建n个子线程
    for i_1 in range(num):
        t = threading.Thread(target=get_threading, args=(q,), name="child_thread_%s" % i_1)
        threads.append(t)
    for t in threads:  # 启动所有子线程
        t.start()
    for t in threads:  # 所有子线程结束，开始继续循环
        t.join()
    print("查询成功")
    # 输出结果
    text = ''
    for num in a:
        if num in gv_number:
            text = text + num + '\n'
        else:
            text = text + num + "(新增号码)" + '\n'
            requests.get('https://young-rain-a136.qyu0615.workers.dev/?content=新增号码：' + num, timeout=5)
            gv_number.append(num)
    time_1 = time.strftime("%Y-%m-%d  %H:%M:%S", time.localtime())
    text = text + "更新时间：" + time_1 + '\n' + "想要增加更多靓号查询，请私信@cherbim"
    url = "https://royal-waterfall-3a54.qyu0615.workers.dev?id=-1001577647099&content="
    requests.get(url + text, timeout=5)
    print("查询结果已推送")
    time.sleep(900)

